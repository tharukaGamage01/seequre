System.register([],function(M){"use strict";return{execute:function(){M("atom",R);let N=0;function R(s,a){const h=`atom${++N}`,v={toString:()=>h};return typeof s=="function"?v.read=s:(v.init=s,v.read=T,v.write=U),a&&(v.write=a),v}function T(s){return s(this)}function U(s,a,h){return a(this,typeof h=="function"?h(s(this)):h)}const b=(s,a)=>s.unstable_is?s.unstable_is(a):a===s,O=s=>"init"in s,_=s=>!!s.write,m=new WeakMap,V=(s,a)=>{m.set(s,a),s.catch(()=>{}).finally(()=>m.delete(s))},C=(s,a)=>{const h=m.get(s);h&&(m.delete(s),h(a))},q=(s,a)=>{s.status="fulfilled",s.value=a},B=(s,a)=>{s.status="rejected",s.reason=a},X=s=>typeof(s==null?void 0:s.then)=="function",E=(s,a)=>!!s&&"v"in s&&"v"in a&&Object.is(s.v,a.v),F=(s,a)=>!!s&&"e"in s&&"e"in a&&Object.is(s.e,a.e),p=s=>!!s&&"v"in s&&s.v instanceof Promise,$=(s,a)=>"v"in s&&"v"in a&&s.v.orig&&s.v.orig===a.v.orig,y=s=>{if("e"in s)throw s.e;return s.v},x=M("createStore",()=>{const s=new WeakMap,a=new WeakMap,h=[],v=new WeakMap,g=t=>s.get(t),G=(t,o)=>{o.d.forEach((u,r)=>{var n;if(!v.has(r)){const i=g(r);(n=h[h.length-1])==null||n.add(r),v.set(r,[i,new Set]),i&&G(r,i)}v.get(r)[1].add(t)})},H=(t,o)=>{var u;const r=g(t);if(s.set(t,o),v.has(t)||((u=h[h.length-1])==null||u.add(t),v.set(t,[r,new Set]),G(t,o)),p(r)){const n="v"in o?o.v instanceof Promise?o.v:Promise.resolve(o.v):Promise.reject(o.e);r.v!==n&&C(r.v,n)}},I=(t,o,u,r)=>{const n=new Map(r?o.d:null);let i=!1;u.forEach((e,c)=>{!e&&b(t,c)&&(e=o),e&&(n.set(c,e),o.d.get(c)!==e&&(i=!0))}),(i||o.d.size!==n.size)&&(o.d=n)},z=(t,o,u,r)=>{const n=g(t),i={d:(n==null?void 0:n.d)||new Map,v:o};if(u&&I(t,i,u,r),E(n,i)&&n.d===i.d)return n;if(p(n)&&p(i)&&$(n,i)){if(n.d===i.d)return n;i.v=n.v}return H(t,i),i},J=(t,o,u,r)=>{if(X(o)){let n;const i=()=>{const c=g(t);if(!p(c)||c.v!==e)return;const f=z(t,e,u);a.has(t)&&c.d!==f.d&&L(t,f,c.d)},e=new Promise((c,f)=>{let l=!1;o.then(d=>{l||(l=!0,q(e,d),c(d),i())},d=>{l||(l=!0,B(e,d),f(d),i())}),n=d=>{l||(l=!0,d.then(w=>q(e,w),w=>B(e,w)),c(d))}});return e.orig=o,e.status="pending",V(e,c=>{c&&n(c),r==null||r()}),z(t,e,u,!0)}return z(t,o,u)},Q=(t,o,u)=>{const r=g(t),n={d:(r==null?void 0:r.d)||new Map,e:o};return u&&I(t,n,u),F(r,n)&&r.d===n.d?r:(H(t,n),n)},S=(t,o)=>{const u=g(t);if(!o&&u&&(a.has(t)||Array.from(u.d).every(([l,d])=>{if(l===t)return!0;const w=S(l);return w===d||E(w,d)})))return u;const r=new Map;let n=!0;const i=l=>{if(b(t,l)){const w=g(l);if(w)return r.set(l,w),y(w);if(O(l))return r.set(l,void 0),l.init;throw new Error("no atom init")}const d=S(l);return r.set(l,d),y(d)};let e,c;const f={get signal(){return e||(e=new AbortController),e.signal},get setSelf(){return!c&&_(t)&&(c=(...l)=>{if(!n)return j(t,...l)}),c}};try{const l=t.read(i,f);return J(t,l,r,()=>e==null?void 0:e.abort())}catch(l){return Q(t,l,r)}finally{n=!1}},Y=t=>y(S(t)),Z=t=>{let o=a.get(t);return o||(o=W(t)),o},P=(t,o)=>!o.l.size&&(!o.t.size||o.t.size===1&&o.t.has(t)),tt=t=>{const o=a.get(t);o&&P(t,o)&&A(t)},nt=t=>{const o=e=>{var c,f;const l=new Set((c=a.get(e))==null?void 0:c.t);return(f=v.get(e))==null||f[1].forEach(d=>{l.add(d)}),l},u=new Array,r=new Set,n=e=>{if(!r.has(e)){r.add(e);for(const c of o(e))e!==c&&n(c);u.push(e)}};n(t);const i=new Set([t]);for(let e=u.length-1;e>=0;--e){const c=u[e],f=g(c);if(!f)continue;let l=!1;for(const d of f.d.keys())if(d!==c&&i.has(d)){l=!0;break}if(l){const d=S(c,!0);E(f,d)||i.add(c)}}},K=(t,...o)=>{const u=n=>y(S(n)),r=(n,...i)=>{const e=h.length>0;e||h.push(new Set([n]));let c;if(b(t,n)){if(!O(n))throw new Error("atom not writable");const f=g(n),l=J(n,i[0]);E(f,l)||nt(n)}else c=K(n,...i);return e||D(h.pop()),c};return t.write(u,r,...o)},j=(t,...o)=>{h.push(new Set([t]));const u=K(t,...o);return D(h.pop()),u},W=(t,o,u)=>{var r;const n=u||[];(r=g(t))==null||r.d.forEach((e,c)=>{const f=a.get(c);f?f.t.add(t):c!==t&&W(c,t,n)}),S(t);const i={t:new Set(o&&[o]),l:new Set};if(a.set(t,i),_(t)&&t.onMount){const{onMount:e}=t;n.push(()=>{const c=e((...f)=>j(t,...f));c&&(i.u=c)})}return u||n.forEach(e=>e()),i},A=t=>{var o;const u=(o=a.get(t))==null?void 0:o.u;u&&u(),a.delete(t);const r=g(t);r&&(p(r)&&C(r.v),r.d.forEach((n,i)=>{if(i!==t){const e=a.get(i);e&&(e.t.delete(t),P(i,e)&&A(i))}}))},L=(t,o,u)=>{const r=new Set(o.d.keys()),n=new Set;u==null||u.forEach((i,e)=>{if(r.has(e)){r.delete(e);return}n.add(e);const c=a.get(e);c&&c.t.delete(t)}),r.forEach(i=>{const e=a.get(i);e?e.t.add(t):a.has(t)&&W(i,t)}),n.forEach(i=>{const e=a.get(i);e&&P(i,e)&&A(i)})},D=t=>{const o=[],u=r=>{var n;if(!v.has(r))return;const[i,e]=v.get(r);v.delete(r),o.push([r,i]),e.forEach(u),(n=g(r))==null||n.d.forEach((c,f)=>u(f))};t.forEach(u),o.forEach(([r,n])=>{const i=g(r);if(i&&i!==n){const e=a.get(r);e&&i.d!==(n==null?void 0:n.d)&&L(r,i,n==null?void 0:n.d),e&&!(!p(n)&&(E(n,i)||F(n,i)))&&e.l.forEach(c=>c())}})};return{get:Y,set:j,sub:(t,o)=>{const u=Z(t);D([t]);const r=u.l;return r.add(o),()=>{r.delete(o),tt(t)}}}});let k;const et=M("getDefaultStore",()=>(k||(k=x()),k))}}});
